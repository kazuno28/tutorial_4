[ユーザーを更新する]
<編集フォーム>
[演習]
1. target="_blank"で新しいページを開くときには、セキュリティ上の小さな問題がある。
　 それは、リンク先のサイトがHTMLドキュメントのwindowオブジェクトを扱えてしまう、という点である。
　 具体的には、フィッシング (Phising) サイトのような、悪意のあるコンテンツを導入させられてしまう可能性がある。
　 セキュリティ上のリスクも排除しておく。
　 対処方法は、リンク用のaタグのrel (relationship) 属性に、"noopener"と設定するだけ。
　 Gravatarの編集ページへのリンクにこの設定をする。
 [users/edit.html.erb]
 <a href="http://gravatar.com/emails" target="_blank" rel="noopener">changes</a>
 
2. [リスト 10.5]のパーシャルを使って、new.html.erbビュー(リスト 10.6)とedit.html.erbビュー(リスト 10.7)をリファクタリングしてみる(コードの重複を取り除く)。
 　ヒント: 3.4.3で使ったprovideメソッドを使うと、重複を取り除ける。
 リスト通りやる。


<編集の失敗>
[演習]
1. 編集フォームから有効でないユーザー名やメールアドレス、パスワードを使って送信した場合、編集に失敗することを確認。
 失敗した。


<編集失敗時のテスト>
[演習]
1. [users_edit_test.rb]のテストに１行追加し、正しい数のエラーメッセージが表示されているかテストしてみる。
　 ヒント: 表 5.2で紹介したassert_selectを使ってalertクラスのdivタグを探しだし、「The form contains 4 errors.」というテキストを精査
　 

<TDDで編集を成功させる>
[演習]
1. 実際に編集が成功するかどうか、有効な情報を送信して確かめる。
 成功した。

2. もしGravatarと紐付いていない適当なメールアドレス (foobar@example.comなど) に変更した場合、
　 プロフィール画像はどのように表示されるか、実際に編集フォームからメールアドレスを変更して、確認。
 プロフィール画像が切り替わった